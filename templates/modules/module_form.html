{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}{{ title }} - Module Manager{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
			<li class="breadcrumb-item"><a href="{% url 'module_list' %}">Modules</a></li>
			{% if module %}
			<li class="breadcrumb-item"><a href="{% url 'module_detail' module.pk %}">{{ module.name }}</a>
			</li>
			<li class="breadcrumb-item active">Edit</li>
			{% else %}
			<li class="breadcrumb-item active">Create</li>
			{% endif %}
		</ol>
	</nav>
</div>

<div class="row">
	<div class="col-lg-8">
		<div class="card">
			<div class="card-header bg-primary text-white">
				<h5 class="mb-0">
					<i
						class="bi bi-{% if module %}pencil{% else %}plus-circle{% endif %} me-2"></i>
					{{ title }}
				</h5>
			</div>
			<div class="card-body">
				<form method="post">
					{% csrf_token %}
					{% crispy form %}
				</form>

				<div class="mt-3">
					<a href="{% if module %}{% url 'module_detail' module.pk %}{% else %}{% url 'module_list' %}{% endif %}"
						class="btn btn-secondary">
						<i class="bi bi-arrow-left me-2"></i>Cancel
					</a>
				</div>
			</div>
		</div>
	</div>

	<div class="col-lg-4">
		{% if module %}
		<div class="card mt-3">
			<div class="card-header">
				<h6 class="mb-0"><i class="bi bi-clock-history me-2"></i>History</h6>
			</div>
			<div class="card-body">
				<p><small class="text-muted">Created:</small><br>{{ module.created_at|date:"M d, Y H:i" }}</p>
				<p><small class="text-muted">Last updated:</small><br>{{ module.updated_at|date:"M d, Y H:i" }}</p>
			</div>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}
